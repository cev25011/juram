<!-- ... (HTML í—¤ë“œ ë° ìŠ¤íƒ€ì¼ ìƒëµ) ... -->
<body>
    <h1>âœŠâœŒï¸âœ‹ AI ë¡œë´‡ë§ì¹˜ (ìˆ«ì ì‹ í˜¸ ë°©ì‹)</h1>
    
    <!-- ... (ì¹´ë©”ë¼ ë° UI ì¹´ë“œ ë¶€ë¶„ ìƒëµ) ... -->

    <div class="info-card">
        <div id="status">ì¹´ë©”ë¼ ì¤€ë¹„ ì¤‘... ì•„ë‘ì´ë…¸ë¥¼ ì—°ê²°í•˜ì„¸ìš”.</div>
        <button id="btn-serial">1. ì•„ë‘ì´ë…¸(USB/HC-06) ì—°ê²°</button>
        <button id="btn-game">2. ê²Œì„ ì‹œì‘!</button>
        <button id="btn-test">3. ì„œë³´ëª¨í„° í…ŒìŠ¤íŠ¸ (ìˆ«ì 1 ì „ì†¡)</button> <!-- ë²„íŠ¼ í…ìŠ¤íŠ¸ ë³€ê²½ -->
        <div id="result-display">ì¤€ë¹„í•˜ì„¸ìš”!</div>
    </div>

    <script>
        // ... (const ë° let ë³€ìˆ˜ ì„ ì–¸ ìƒëµ) ...
        
        // 1. ì•„ë‘ì´ë…¸ ì—°ê²° (Web Serial API)
        document.getElementById('btn-serial').onclick = async () => {
            try {
                port = await navigator.serial.requestPort();
                await port.open({ baudRate: 9600 }); // ì†ë„ëŠ” 9600ìœ¼ë¡œ ê³ ì •í•˜ê³  í…ŒìŠ¤íŠ¸
                statusText.innerText = "âœ… ê¸°ê¸° ì—°ê²° ì„±ê³µ! (ì‹œë¦¬ì–¼ í¬íŠ¸ ê°œë°©)";
                statusText.style.color = "#2ecc71";
            } catch (err) {
                statusText.innerText = "âŒ ì—°ê²° ì‹¤íŒ¨: " + err.message;
            }
        };

        // 2. ìˆ«ì '1' ì‹ í˜¸ ì „ì†¡
        async function hitHammer() {
            if (port && port.writable) {
                const writer = port.writable.getWriter();
                try {
                    // ìˆ«ì '1'ì˜ ASCII ê°’(49)ì„ ë°”ì´íŠ¸ ë°°ì—´ë¡œ ì „ì†¡
                    const data = new Uint8Array([49]); 
                    await writer.write(data);
                    console.log("ì‹ í˜¸ '1' ì „ì†¡ ì™„ë£Œ");
                    resultText.innerText = "ğŸ”¨ í…ŒìŠ¤íŠ¸ ì‹ í˜¸ (1) ì „ì†¡ë¨!";
                    resultText.style.color = "#3498db";
                } catch (error) {
                    console.error("ë°ì´í„° ì „ì†¡ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
                } finally {
                    writer.releaseLock();
                }
            } else {
                alert("ë¨¼ì € '1. ì•„ë‘ì´ë…¸ ì—°ê²°' ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!");
            }
        }
        
        // 3. í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì—°ê²°
        document.getElementById('btn-test').onclick = hitHammer;

        // ... (onResults, document.getElementById('btn-game').onclick, hands, camera ì„¤ì • ë¶€ë¶„ì€ ë™ì¼) ...

    </script>
</body>
</html>
